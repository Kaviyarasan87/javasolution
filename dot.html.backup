--text-primary: #ecf0f1;
--text-secondary: #bdc3c7;
--border-color: #34495e;
--shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
}

[data-theme="dark"] body {
background: linear-gradient(135deg, #1a1a2e, #16213e);
}

/* Reset */
*, *::before, *::after {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
background: var(--primary-gradient);
min-height: 100vh;
display: flex;
justify-content: center;
align-items: center;
padding: calc(var(--header-height) + 1rem) 1rem 1rem;
transition: background var(--transition);
}

/* Header */
header {
position: fixed;
top: 0;
left: 0;
right: 0;
background-color: rgba(0, 0, 0, 0.6);
backdrop-filter: blur(10px);
color: #fff;
display: flex;
justify-content: space-between;
align-items: center;
padding: 1rem 2rem;
z-index: 1000;
height: var(--header-height);
}

.logo {
font-size: 1.5rem;
font-weight: 700;
}

nav {
display: flex;
gap: 1.5rem;
}

nav a {
color: #fff;
text-decoration: none;
font-weight: 500;
transition: color var(--transition);
}

nav a:hover {
color: #ff4500;
}

/* Mobile Menu */
.menu-btn {
position: fixed;
top: 1rem;
left: 1rem;
width: 50px;
height: 50px;
background-color: #333;
color: white;
font-size: 20px;
display: none;
align-items: center;
justify-content: center;
border-radius: 8px;
cursor: pointer;
z-index: 1001;
border: none;
transition: all var(--transition);
}

.menu-btn:hover {
transform: scale(1.05);
background-color: #555;
}

.menu {
position: fixed;
top: 5rem;
left: 1rem;
background: white;
width: 200px;
border-radius: 8px;
box-shadow: var(--shadow);
opacity: 0;
visibility: hidden;
transform: translateY(-10px);
transition: all var(--transition);
z-index: 1000;
}

.menu.visible {
opacity: 1;
visibility: visible;
transform: translateY(0);
}

.menu a {
display: block;
padding: 1rem;
text-decoration: none;
color: #333;
border-bottom: 1px solid var(--border-color);
transition: background var(--transition);
}

.menu a:last-child {
border-bottom: none;
}

.menu a:hover {
background: #f1f1f1;
}

/* Main Container */
.container {
background: rgba(255, 255, 255, 0.95);
padding: 2rem;
border-radius: 16px;
box-shadow: var(--shadow);
backdrop-filter: blur(10px);
width: 100%;
max-width: 700px;
animation: slideIn 0.5s ease-out;
}

@keyframes slideIn {
from {
opacity: 0;
transform: translateY(20px);
}
to {
opacity: 1;
transform: translateY(0);
}
}

h1 {
text-align: center;
font-size: 2rem;
color: var(--ocean-blue);
margin-bottom: 2rem;
}

/* File Input Styling */
.file-input-wrapper {
position: relative;
margin-bottom: 1rem;
}

#fileInput {
width: 100%;
padding: 1rem;
border: 2px dashed var(--border-color);
border-radius: 8px;
background-color: var(--card-bg);
color: var(--text-primary);
cursor: pointer;
transition: all var(--transition);
}

#fileInput:hover {
border-color: var(--sky-blue);
background-color: rgba(0, 217, 255, 0.05);
}

#fileInput:focus {
outline: none;
border-color: var(--sky-blue);
}

/* Text Input */
#fileNameInput {
width: 100%;
padding: 1rem;
border: 2px solid var(--border-color);
border-radius: 8px;
font-size: 14px;
background-color: var(--card-bg);
color: var(--text-primary);
margin-bottom: 1rem;
transition: border-color var(--transition);
}

#fileNameInput:focus {
outline: none;
border-color: var(--sky-blue);
}

/* Upload Button with Animation */
.upload-btn {
width: 100%;
padding: 1rem 2rem;
text-transform: uppercase;
letter-spacing: 2px;
border: 3px solid var(--sky-blue);
font-size: 16px;
font-weight: 600;
background: transparent;
color: var(--ocean-blue);
cursor: pointer;
overflow: hidden;
position: relative;
border-radius: 8px;
transition: all var(--transition);
}

.upload-btn::before {
content: "Upload";
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background-color: var(--ocean-blue);
color: var(--sky-blue);
display: flex;
justify-content: center;
align-items: center;
transition: all 0.4s;
}

.upload-btn:hover::before {
left: 100%;
opacity: 0;
}

.upload-btn::after {
content: "Click";
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background-color: var(--ocean-blue);
color: var(--sky-blue);
display: flex;
justify-content: center;
align-items: center;
transition: all 0.4s;
opacity: 0;
}

.upload-btn:hover::after {
left: 0;
opacity: 1;
}

.upload-btn:disabled {
opacity: 0.6;
cursor: not-allowed;
}

/* Search Box */
#searchBox {
width: 100%;
padding: 0.75rem;
margin: 1.5rem 0;
border: 2px solid var(--border-color);
border-radius: 8px;
font-size: 14px;
background-color: var(--card-bg);
color: var(--text-primary);
transition: border-color var(--transition);
}

#searchBox:focus {
outline: none;
border-color: var(--sky-blue);
}

/* File List */
#fileList {
max-height: 400px;
overflow-y: auto;
padding-right: 0.5rem;
margin-top: 1rem;
}

#fileList::-webkit-scrollbar {
width: 8px;
}

#fileList::-webkit-scrollbar-track {
background: #f1f1f1;
border-radius: 4px;
}

#fileList::-webkit-scrollbar-thumb {
background: var(--sky-blue);
border-radius: 4px;
}

/* File Box */
.file-box {
background: var(--card-bg);
margin-bottom: 1rem;
padding: 1.5rem;
border-radius: 12px;
box-shadow: var(--shadow);
transition: all var(--transition);
animation: fadeIn 0.3s ease-out;
border: 1px solid var(--border-color);
}

@keyframes fadeIn {
from {
opacity: 0;
transform: translateX(-10px);
}
to {
opacity: 1;
transform: translateX(0);
}
}

.file-box:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-hover);
}

.file-box p {
margin: 0 0 1rem 0;
font-size: 16px;
font-weight: 600;
color: var(--text-primary);
word-break: break-word;
}

.file-actions {
display: flex;
gap: 0.5rem;
flex-wrap: wrap;
}

.file-box button {
flex: 1;
min-width: 100px;
background: linear-gradient(135deg, var(--sky-blue), #0099cc);
border: none;
padding: 0.75rem 1.25rem;
border-radius: 6px;
color: white;
font-size: 14px;
font-weight: 600;
cursor: pointer;
transition: all var(--transition);
}

.file-box button:hover {
transform: translateY(-2px);
box-shadow: 0 4px 12px rgba(0, 153, 204, 0.3);
}

.file-box button:last-child {
background: linear-gradient(135deg, #e74c3c, #c0392b);
}

.file-box button:last-child:hover {
box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
}

/* Dark Mode Toggle */
#toggleModeButton {
position: fixed;
top: 5rem;
right: 1rem;
background: linear-gradient(135deg, #ff6b6b, #ff8e53);
border: none;
padding: 0.75rem 1.5rem;
border-radius: 25px;
color: white;
font-size: 14px;
font-weight: 600;
cursor: pointer;
box-shadow: var(--shadow);
transition: all var(--transition);
z-index: 999;
}

#toggleModeButton:hover {
transform: translateY(-2px);
box-shadow: var(--shadow-hover);
}

/* Empty State */
.empty-state {
text-align: center;
padding: 3rem 1rem;
color: var(--text-secondary);
}

.empty-state p {
font-size: 1.1rem;
margin-bottom: 0.5rem;
}

/* Loading Spinner */
.loading-spinner {
display: none;
width: 40px;
height: 40px;
border: 4px solid rgba(0, 217, 255, 0.3);
border-top-color: var(--sky-blue);
border-radius: 50%;
animation: spin 0.8s linear infinite;
margin: 2rem auto;
}

.loading-spinner.active {
display: block;
}

@keyframes spin {
to { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 768px) {
header {
padding: 1rem;
}

header nav {
display: none;
}

.menu-btn {
display: flex;
}

.container {
padding: 1.5rem;
}

h1 {
font-size: 1.5rem;
}

#toggleModeButton {
padding: 0.5rem 1rem;
font-size: 12px;
}

.file-actions {
flex-direction: column;
}

.file-box button {
width: 100%;
}
}

@media (max-width: 480px) {
body {
padding: calc(var(--header-height) + 0.5rem) 0.5rem 0.5rem;
}

.container {
padding: 1rem;
}

.menu-btn {
width: 40px;
height: 40px;
font-size: 18px;
}
}

/* Visually Hidden */
.visually-hidden {
position: absolute;
width: 1px;
height: 1px;
margin: -1px;
padding: 0;
overflow: hidden;
clip: rect(0, 0, 0, 0);
white-space: nowrap;
border: 0;
}
</style>
</head>

<body>
    <header role="banner">
        <div class="logo">Text&File Uploads</div>
        <nav role="navigation">
            <a href="index.html">Home</a>
            <a href="text.html">Text Upload</a>
            <a href="dot.html" aria-current="page">File Upload</a>
            <a href="about.html">About</a>
        </nav>
    </header>

    <button class="menu-btn" id="menuBtn" aria-label="Toggle menu">‚ò∞</button>
    <div class="menu" id="menu" role="navigation">
        <a href="index.html">Home</a>
        <a href="text.html">Text Upload</a>
        <a href="dot.html">File Upload</a>
        <a href="about.html">About</a>
    </div>

    <div class="container">
        <h1>Upload Your Files</h1>

        <button id="toggleModeButton" aria-label="Toggle dark mode">üåô Dark Mode</button>

        <form id="uploadForm" aria-label="File upload form">
            <div class="file-input-wrapper">
                <label for="fileInput" class="visually-hidden">Select file to upload</label>
                <input type="file" id="fileInput" aria-required="true">
            </div>

            <label for="fileNameInput" class="visually-hidden">Enter file name</label>
            <input type="text" id="fileNameInput" placeholder="Enter desired file name (without extension)"
                aria-required="true">

            <button type="submit" class="upload-btn" id="uploadButton">Upload</button>
        </form>

        <label for="searchBox" class="visually-hidden">Search files</label>
        <input type="search" id="searchBox" placeholder="üîç Search files..." aria-label="Search uploaded files">

        <div class="loading-spinner" id="loadingSpinner"></div>

        <div id="fileList" role="region" aria-label="Uploaded files"></div>
    </div>

    <script type="module">
        // Firebase SDK imports - PRESERVED CONFIGURATION
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-app.js";
        import { getStorage, ref, uploadBytes, getDownloadURL, deleteObject, listAll } from "https://www.gstatic.com/firebasejs/11.2.0/firebase-storage.js";

        // Firebase config - UNCHANGED
        const firebaseConfig = {
            apiKey: "AIzaSyBMS_SwjUwlrNGbbdLNQvxfqJKy1whqH-Y",
            authDomain: "file-4f9fe.firebaseapp.com",
            projectId: "file-4f9fe",
            storageBucket: "file-4f9fe.appspot.com",
            messagingSenderId: "777922174298",
            appId: "1:777922174298:web:70b8c6a5006512ef4ce763",
            measurementId: "G-VE72B5E88S"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const storage = getStorage(app);

        // DOM Elements
        const elements = {
            form: document.getElementById('uploadForm'),
            fileInput: document.getElementById('fileInput'),
            fileNameInput: document.getElementById('fileNameInput'),
            uploadButton: document.getElementById('uploadButton'),
            searchBox: document.getElementById('searchBox'),
            fileList: document.getElementById('fileList'),
            toggleMode: document.getElementById('toggleModeButton'),
            menuBtn: document.getElementById('menuBtn'),
            menu: document.getElementById('menu'),
            loadingSpinner: document.getElementById('loadingSpinner')
        };

        let allFiles = [];

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 6rem;
                right: 1rem;
                background: ${type === 'success' ? '#2ecc71' : '#e74c3c'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
            `;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 2500);
        }

        // Upload file
        elements.form.addEventListener('submit', async (e) => {
            e.preventDefault();

            if (!elements.fileInput.files.length) {
                showNotification("Please select a file to upload!", 'error');
                return;
            }

            const file = elements.fileInput.files[0];
            const customFileName = elements.fileNameInput.value.trim();

            if (customFileName === "") {
                showNotification("File name is required!", 'error');
                return;
            }

            const fileExtension = file.name.split('.').pop();
            const customFilePath = `uploads/${customFileName}.${fileExtension}`;
            const storageRef = ref(storage, customFilePath);

            try {
                elements.uploadButton.disabled = true;
                elements.loadingSpinner.classList.add('active');

                await uploadBytes(storageRef, file);
                showNotification('‚úì File uploaded successfully!', 'success');

                elements.fileInput.value = "";
                elements.fileNameInput.value = "";

                await displayFiles();
            } catch (error) {
                console.error('Upload failed:', error);
                showNotification('‚úó Upload failed!', 'error');
            } finally {
                elements.uploadButton.disabled = false;
                elements.loadingSpinner.classList.remove('active');
            }
        });

        // Display files
        async function displayFiles() {
            elements.loadingSpinner.classList.add('active');
            elements.fileList.innerHTML = '';

            const storageRef = ref(storage, 'uploads');

            try {
                const result = await listAll(storageRef);
                allFiles = result.items;

                if (allFiles.length === 0) {
                    elements.fileList.innerHTML = `
                        <div class="empty-state">
                            <p>No files uploaded yet</p>
                            <p style="font-size: 0.9rem;">Start by uploading your first file above</p>
                        </div>
                    `;
                    return;
                }

                const fragment = document.createDocumentFragment();

                for (const fileRef of allFiles) {
                    const url = await getDownloadURL(fileRef);
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'file-box';
                    fileDiv.innerHTML = `
                        <p>üìÑ ${escapeHtml(fileRef.name)}</p>
                        <div class="file-actions">
                            <button data-action="download" data-url="${url}">‚¨áÔ∏è Download</button>
                            <button data-action="delete" data-path="${fileRef.fullPath}">üóëÔ∏è Delete</button>
                        </div>
                    `;
                    fragment.appendChild(fileDiv);
                }

                elements.fileList.appendChild(fragment);
            } catch (error) {
                console.error('Error fetching file list:', error);
                showNotification('‚úó Error loading files!', 'error');
            } finally {
                elements.loadingSpinner.classList.remove('active');
            }
        }

        // Escape HTML
        function escapeHtml(text) {
            try {
                elements.loadingSpinner.classList.add('active');
                await deleteObject(fileRef);
                showNotification('‚úì File deleted successfully!', 'success');
                await displayFiles();
            } catch (error) {
                console.error('Error deleting file:', error);
                showNotification('‚úó Error deleting file!', 'error');
                elements.loadingSpinner.classList.remove('active');
            }
        }

        // Theme toggle
        elements.toggleMode.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

            document.documentElement.setAttribute('data-theme', newTheme);
            elements.toggleMode.textContent = newTheme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';

            localStorage.setItem('theme', newTheme);
        });

        // Load saved theme
        const savedTheme = localStorage.getItem('theme') || 'light';
        if (savedTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
            elements.toggleMode.textContent = '‚òÄÔ∏è Light Mode';
        }

        // Mobile menu toggle
        elements.menuBtn.addEventListener('click', () => {
            elements.menu.classList.toggle('visible');
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (!elements.menuBtn.contains(e.target) && !elements.menu.contains(e.target)) {
                elements.menu.classList.remove('visible');
            }
        });

        // Initialize - Load files on page load
        window.addEventListener('load', displayFiles);
    </script>
</body>

</html>